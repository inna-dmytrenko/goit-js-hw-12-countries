{"version":3,"sources":["webpack:///./index.js","webpack:///./js/get-refs.js","webpack:///./js/fetchCountries.js","webpack:///./templates/countries.hbs","webpack:///./templates/country.hbs"],"names":["refs","form","document","querySelector","list","input","insertListItem","items","insertAdjacentHTML","console","log","addEventListener","event","preventDefault","debounce","e","searchQuery","target","value","innerHTML","length","name","fetch","then","response","ok","json","Error","statusText","data","catch","error","alert","markup","countryListTemplate","renderCountriesList","countriesListTemplate","buildCountriesList","PNotify","defaults","styling","icons","title","text","searchFormInput","Handlebars","__webpack_require__","module","exports","template","1","container","depth0","helpers","partials","helper","escapeExpression","helperMissing","call","nullContext","hash","compiler","main","stack1","each","fn","program","inverse","noop","useData","alias1","alias2","alias4","capital","population","languages","flag","2","lambda"],"mappings":"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","file":"main.8d416bada7f74f783177.js","sourcesContent":["import './styles.css';\r\nimport fetchCountries from './js/fetchCountries';\r\nimport countryListTemplate from './templates/country.hbs';\r\nimport countriesListTemplate from './templates/countries.hbs';\r\nimport PNotify from 'pnotify/dist/es/PNotify.js';\r\nimport PNotifyStyleMaterial from 'pnotify/dist/es/PNotifyStyleMaterial';\r\n\r\nimport debounce from 'lodash.debounce';\r\nimport getRefs from './js/get-refs';\r\n\r\nconst refs = getRefs();\r\n\r\nrefs.form.addEventListener('submit', event => {\r\n  event.preventDefault();\r\n});\r\n\r\nrefs.form.addEventListener(\r\n  'input',\r\n  debounce(e => {\r\n    searchFormInput(e);\r\n  }, 500),\r\n);\r\n\r\nfunction searchFormInput(e) {\r\n  const searchQuery = e.target.value;\r\n  console.log(searchQuery);\r\n  clearListItems();\r\n  if (searchQuery.length > 0) {\r\n    fetchCountries(searchQuery).then(data => {\r\n      const markup = buildListMarkup(data);\r\n      const renderCountriesList = buildCountriesList(data);\r\n      if (!data) {\r\n        return;\r\n      } else if (data.length > 10) {\r\n        PNotify.defaults.styling = 'material';\r\n        PNotify.defaults.icons = 'material';\r\n        PNotify.error({\r\n          title: 'Oh, No!',\r\n          text: 'Too many matches found. Please enter a more specific query!',\r\n        });\r\n      } else if (data.length >= 2 && data.length <= 10) {\r\n        insertListItem(renderCountriesList);\r\n      } else if (data.length === 1) {\r\n        insertListItem(markup);\r\n      }\r\n    });\r\n  } else {\r\n    return;\r\n  }\r\n}\r\n\r\nfunction insertListItem(items) {\r\n  refs.list.insertAdjacentHTML('beforeend', items);\r\n  console.log(items);\r\n}\r\n\r\nfunction buildCountriesList(items) {\r\n  return countriesListTemplate(items);\r\n}\r\n\r\nfunction buildListMarkup(items) {\r\n  return countryListTemplate(items);\r\n}\r\n\r\nfunction clearListItems() {\r\n  refs.list.innerHTML = '';\r\n}\r\n","export default function getRefs() {\r\n  return {\r\n    form: document.querySelector('#search-form'),\r\n    list: document.querySelector('#country-list'),\r\n    input: document.querySelector('.search__input'),\r\n  };\r\n}\r\n","// import axios from 'axios';\r\n\r\n// export const fetchCountries = name => {\r\n//   return axios\r\n//     .get(`https://restcountries.eu/rest/v2/name/${name}`)\r\n//     .then(r => r.data)\r\n//     .catch(error =>\r\n//       console.log('Упс, что-то пошло не так. Корректно введите запрос'),\r\n//     );\r\n// };\r\n\r\nexport default function fetchCountries(name) {\r\n  return fetch(`https://restcountries.eu/rest/v2/name/${name}`)\r\n    .then(response => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n      throw new Error(response.statusText);\r\n    })\r\n    .then(data => {\r\n      if (name) {\r\n        return data;\r\n      } else {\r\n        return;\r\n      }\r\n    })\r\n\r\n    .catch(error => {\r\n      if (name !== '') {\r\n        console.log(\r\n          alert('Упс, что-то пошло не так. Корректно введите запрос'),\r\n        );\r\n      }\r\n    });\r\n}\r\n\r\n// function fetchCountries(searchQuery) {\r\n//   const url = `https://restcountries.eu/rest/v2/name/${searchQuery}`;\r\n\r\n//   return fetch(url)\r\n//     .then(response => {\r\n//       if (response.ok) {\r\n//         return response.json();\r\n//       }\r\n//     })\r\n//     .catch(error => {\r\n//       alert('Упс, что-то пошло не так. Корректно введите запрос');\r\n//     });\r\n// }\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<li class=\\\"country-item\\\">\"\n    + container.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</li>\\r\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"item\\\">\\r\\n    <article class=\\\"article\\\">\\r\\n        <div class=\\\"name\\\">\\r\\n            <h1 class=\\\"name-country\\\">\"\n    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</h1>\\r\\n        </div>\\r\\n        <div class=\\\"country-characteristics\\\">\\r\\n            <h2 class=\\\"capital\\\">Capital : \"\n    + alias4(((helper = (helper = helpers.capital || (depth0 != null ? depth0.capital : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"capital\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</h2>\\r\\n            <span class=\\\"population\\\">Population : \"\n    + alias4(((helper = (helper = helpers.population || (depth0 != null ? depth0.population : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"population\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</span>\\r\\n            <div class=\\\"langs\\\">\\r\\n                <h2 class=\\\"lang-title\\\">Language : </h2>\\r\\n                <ul class=\\\"lang-list\\\">\\r\\n                    \"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.languages : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\\r\\n                </ul>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"img-flag\\\">\\r\\n            <img src=\\\"\"\n    + alias4(((helper = (helper = helpers.flag || (depth0 != null ? depth0.flag : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"flag\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" alt=\\\"\\\" width=\\\"300\\\" height=\\\"250\\\">\\r\\n        </div>\\r\\n    </article>\\r\\n</li>\\r\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    return \" <li class=\\\"lang-item\\\">\"\n    + container.escapeExpression(container.lambda((depth0 != null ? depth0.name : depth0), depth0))\n    + \"</li> \";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}